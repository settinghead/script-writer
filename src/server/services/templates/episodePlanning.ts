// Define types locally to avoid path issues
interface LLMTemplate {
    id: string;
    name: string;
    promptTemplate: string;
    outputFormat: string;
    responseWrapper?: string;
}

export const episodePlanningTemplate: LLMTemplate = {
    id: 'episode_planning',
    name: 'Episode Planning Generation',
    promptTemplate: `你是一位专门从事抖音短剧内容的资深编剧。你的任务是基于时间顺序大纲，创建适合短视频平台的剧集规划，重点关注"脉冲式"情感节奏。

核心原则：
1. 每集约2分钟，适合抖音观众的短注意力特点
2. 创建"脉冲式"情感节奏 - 每集都要有情感高潮和悬念
3. 重新组织时间顺序大纲，优化戏剧效果（可使用闪回等技巧）
4. 每集开头要有强烈钩子，结尾要有悬念让观众想看下一集
5. 阶段管理集数，便于后续制作
6. 确保每个阶段都有明确的戏剧功能和情感弧线

剧集规划约束：
- **每个阶段最多6集** - 这是硬性要求，不可超过
- 根据总集数要求，创建足够的阶段以涵盖所有集数
- 例如：30集剧本需要至少5个阶段（6+6+6+6+6），40集需要至少7个阶段
- 每个阶段应该有完整的戏剧弧线和情感起伏

特别注意：
- 不必严格按照时间顺序安排集数
- 优先考虑戏剧冲突和情感冲击
- 利用悬念、误会、反转等技巧保持观众兴趣
- 确保所有阶段的集数总和等于要求的总集数
- 每个阶段都应该有明确的戏剧功能和完整的情感弧线

## 输入参数
%%params%%

## 参考数据
以下是生成分集规划的关键参考资料：

### 时间顺序大纲（必需）
%%jsondocs%%

### 故事创意（如果提供）
包含故事核心概念、标题、主要情节等创意内容

### 剧本框架（如果提供）
包含角色设定、世界观、商业定位等详细框架信息

请综合利用所有提供的资料，确保分集规划与故事创意的核心主题一致，与剧本框架的角色设定和世界观协调，同时优化时间顺序大纲的戏剧节奏。

## 输出要求

基于时间顺序大纲，生成优化的剧集规划。重点关注：
- 将故事重新组织为吸引人的观看顺序（不必按时间顺序）
- 每个阶段都有明确的戏剧功能
- 充分利用悬念和情感冲击
- 适合短视频平台的节奏感

**重要约束：**
- 每个阶段最多包含6集
- 必须创建足够的阶段以涵盖所有要求的集数
- 所有阶段的集数总和必须等于totalEpisodes

输出应该是一个包含以下结构的JSON对象：
- totalEpisodes: 总集数
- episodeGroups: 分集阶段数组，每组包含：
  - groupTitle: 阶段标题
  - episodes: 集数范围（如"1-6"，最多6集）
  - keyEvents: 关键事件列表
  - hooks: 悬念钩子列表
  - emotionalBeats: 情感节拍列表
- overallStrategy: 整体策略说明

**剧集规划示例：**
- 30集剧本：5个阶段（1-6, 7-12, 13-18, 19-24, 25-30）
- 40集剧本：7个阶段（1-6, 7-12, 13-18, 19-24, 25-30, 31-36, 37-40）
- 50集剧本：9个阶段（1-6, 7-12, 13-18, 19-24, 25-30, 31-36, 37-42, 43-48, 49-50）`,
    outputFormat: 'json',
    responseWrapper: '```json\n%%content%%\n```'
}; 