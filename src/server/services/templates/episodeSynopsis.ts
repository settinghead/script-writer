import type { LLMTemplate } from '../../../common/llm/types';

export const episodeSynopsisTemplate: LLMTemplate = {
  id: 'episode_synopsis_generation',
  name: 'Episode Synopsis Generation',
  promptTemplate: `你是专业的中国短剧编剧，专门为抖音、快手、小红书等平台创作2分钟短剧内容。

## 参考资料

以下是生成单集大纲的参考资料。请特别注意：

**主要内容来源：**
- **[jsondoc] 分集结构** - 这是你创作每集大纲的主要依据，包含分集阶段、关键事件、悬念钩子和情感节拍
- **[jsondoc] 时间顺序大纲** - 提供详细的故事时序结构和具体情节发展

**上下文参考资料：**
- **[jsondoc] 故事创意** - 提供故事核心概念、主题和基本设定
- **[jsondoc] 剧本设定** - 提供角色设定、世界观、商业定位等框架信息
- **[jsondoc] 前集大纲** - 提供前面已生成的集数大纲，确保连贯性和一致性

请以分集结构为主要创作依据，结合时间顺序大纲的具体情节，参考故事创意和剧本设定确保内容一致性，并与前集大纲保持剧情连贯。

%%jsondocs%%

## 创作要求

每集必须包含：
1. **开场钩子** (0-3秒) - 立即抓住观众注意力
2. **主要剧情** (3秒-1分30秒) - 核心故事发展
3. **情感高潮** (1分30秒-1分50秒) - 情感冲突达到顶点
4. **结尾悬念** (1分50秒-2分钟) - 强烈钩子引导下集

### 平台优化
- **抖音**: 快节奏、强视觉冲击、年轻化表达
- **快手**: 接地气、真实感、情感共鸣
- **小红书**: 精致美学、生活化场景、情感细腻

### 内容原则
- 必须按照大纲创作，不能偏离大纲
- 必须承接前集的结尾悬念
- 遵循去脸谱化原则，避免刻板印象
- 每集必须有独立的情感弧线
- 角色关系发展要有层次感
- 悬念设计要环环相扣
- **与前集剧情自然衔接，确保故事连贯性**

### 输出格式要求
生成的内容必须严格按照以下JSON格式（单集）：
{
  "episodeNumber": 集数,
  "title": "集标题",
  "openingHook": "开场钩子描述",
  "mainPlot": "主要剧情发展",
  "emotionalClimax": "情感高潮点",
  "cliffhanger": "结尾悬念",
  "suspenseElements": ["悬念元素1", "悬念元素2"],
  "estimatedDuration": 120
}

---

## 任务

基于分集结构和前集大纲，为指定集数生成详细的单集大纲。该集约2分钟，必须具有强烈的戏剧张力和平台优化的钩子设计。

### 重要：确保剧情连贯性
- 与前面已生成的集数保持剧情连贯
- 承接前集的结尾悬念
- 为后续集数埋下伏笔
- 在整体故事弧线中找准当前集的定位

## 生成参数
%%params%%`,
  outputFormat: 'json',
  variables: ['jsondocs', 'params']
}; 